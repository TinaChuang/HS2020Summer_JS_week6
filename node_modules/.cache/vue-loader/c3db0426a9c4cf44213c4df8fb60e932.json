{"remainingRequest":"D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JS_summer_vue_Cli\\js_week6\\src\\views\\backend\\Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JS_summer_vue_Cli\\js_week6\\src\\views\\backend\\Dashboard.vue","mtime":1596187318650},{"path":"D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogewogICAgICAgIGVtYWlsOiAnJywKICAgICAgICBwYXNzd29yZDogJycKICAgICAgfSwKICAgICAgdG9rZW46ICcnLAogICAgICB1dWlkOiAnJywKICAgICAgYnRuTG9hZGluZzogZmFsc2UKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNpZ2luSW4oKSB7CiAgICAgIGlmKHRoaXMudXNlci5lbWFpbCA9PSAnJyB8fCB0aGlzLnVzZXIucGFzc3dvcmQgPT0gJycpewogICAgICAgIGFsZXJ0KCLoq4vloavlr6vluLPomZ/lj4rlr4bnorwiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH07CiAgICAgIGNvbnNvbGUuZGlyKCQodGhpcy4kcmVmcy5CdG5fTG9nSW4pKTsKICAgICAgdGhpcy4kaHR0cAogICAgICAgIC5wb3N0KGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSH0vYXV0aC9sb2dpbmAsIHRoaXMudXNlcikKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIGlmKCByZXMuZGF0YS5zdWNjZXNzICl7CiAgICAgICAgICAgIC8vIOWwh+W4s+WvhueahOi8uOWFpeahhua4heepugogICAgICAgICAgICB0aGlzLnVzZXIuZW1haWwgPSAnJzsKICAgICAgICAgICAgdGhpcy51c2VyLnBhc3N3b3JkID0gJyc7CiAgICAgICAgICAgIC8vIFV1aWQsVG9rZW4s5pyf6ZmQIOWvq+WFpSBjb29raWUKICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gYGhleEhXVG9rZW49JHt0aGlzLnRva2VufTsgZXhwaXJlcz0ke25ldyBEYXRlKHJlcy5kYXRhLmV4cGlyZWQgKiAxMDAwKX1gOwogICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgaGV4SFdVdWlkPSR7dGhpcy51dWlkfTsgZXhwaXJlcz0ke25ldyBEYXRlKHJlcy5kYXRhLmV4cGlyZWQgKiAxMDAwKX1gOwogICAgICAgICAgICB0aGlzLnRva2VuID0gcmVzLmRhdGEudG9rZW47CiAgICAgICAgICAgIHRoaXMudXVpZCA9IHJlcy5kYXRhLnV1aWQ7ICAgICAgICAgICAgCiAgICAgICAgICAgIGFsZXJ0KHJlcy5kYXRhLm1lc3NhZ2UpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgLy8g5bCH5biz5a+G55qE6Ly45YWl5qGG5riF56m6CiAgICAgICAgICB0aGlzLnVzZXIuZW1haWwgPSAnJzsKICAgICAgICAgIHRoaXMudXNlci5wYXNzd29yZCA9ICcnOwogICAgICAgICAgYWxlcnQoIuipsueUqOaItuS4jeWtmOWcqCIpOwogICAgICAgIH0pCiAgICAgICAgCiAgICB9LAogICAgc2lnbk91dCgpIHsKICAgICAgdGhpcy50b2tlbiA9ICcnOwogICAgICB0aGlzLnV1aWQgPSAnJzsKICAgICAgZG9jdW1lbnQuY29va2llID0gImhleEhXVG9rZW49OyBleHBpcmVzPSI7CiAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICJoZXhIV1V1aWQ9OyBleHBpcmVzPSI7CiAgICB9LAogIH0KfQo="},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/views/backend","sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <h1>後台介面</h1>\n    <!-- 登入 -->\n    <div class=\"row d-flex justify-content-center align-items-center\" v-if=\"token == ''\">\n      <div class=\"col-12 col-sm-8 col-md-7 text-center\">\n        <div class=\"card p-5 shadow-sm\">\n          <h3 class=\"font-weight-bold mb-4\">請先登入</h3>\n          <div v-if=\"!token\" class=\" mb-4\">\n            <input type=\"email\" name=\"\" id=\"Email\" placeholder=\"Email address\" class=\"form-control\" v-model=\"user.email\"> <br/>\n            <input type=\"password\" name=\"\" id=\"password\" placeholder=\"Password\" class=\"form-control\" v-model=\"user.password\" @keyup.enter=\"siginIn\">\n          </div>          \n          <button type=\"button\" class=\"btn btn-primary btn-block btn-lg\" ref=\"Btn_LogIn\" @click=\"siginIn\">登入</button>\n        </div>        \n      </div>\n    </div>\n    <!-- 後臺選單 -->\n    <ul class=\"nav justify-content-center my-3\" v-else>\n      <li class=\"nav-item px-3 border-left border-right\">\n        <router-link to=\"/backend/products\">產品列表</router-link>\n      </li>\n      <li class=\"nav-item px-3 border-left border-right\">\n        <a href=\"#\" @click.prevent=\"signOut\">登出</a>\n      </li>\n    </ul>\n    <!-- 子頁面 -->\n    <router-view />\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      user: {\n        email: '',\n        password: ''\n      },\n      token: '',\n      uuid: '',\n      btnLoading: false\n    }\n  },\n  methods: {\n    siginIn() {\n      if(this.user.email == '' || this.user.password == ''){\n        alert(\"請填寫帳號及密碼\");\n        return false;\n      };\n      console.dir($(this.$refs.Btn_LogIn));\n      this.$http\n        .post(`${process.env.VUE_APP_APIPATH}/auth/login`, this.user)\n        .then(res => {\n          console.log(res);\n          if( res.data.success ){\n            // 將帳密的輸入框清空\n            this.user.email = '';\n            this.user.password = '';\n            // Uuid,Token,期限 寫入 cookie\n            document.cookie = `hexHWToken=${this.token}; expires=${new Date(res.data.expired * 1000)}`;\n            document.cookie = `hexHWUuid=${this.uuid}; expires=${new Date(res.data.expired * 1000)}`;\n            this.token = res.data.token;\n            this.uuid = res.data.uuid;            \n            alert(res.data.message);\n          }\n        })\n        .catch(err => {\n          console.log(err);\n          // 將帳密的輸入框清空\n          this.user.email = '';\n          this.user.password = '';\n          alert(\"該用戶不存在\");\n        })\n        \n    },\n    signOut() {\n      this.token = '';\n      this.uuid = '';\n      document.cookie = \"hexHWToken=; expires=\";\n      document.cookie = \"hexHWUuid=; expires=\";\n    },\n  }\n}\n</script>\n"]}]}