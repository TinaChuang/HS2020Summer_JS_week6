{"remainingRequest":"D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JS_summer_vue_Cli\\js_week6\\src\\views\\backend\\Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JS_summer_vue_Cli\\js_week6\\src\\views\\backend\\Dashboard.vue","mtime":1596792172124},{"path":"D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogewogICAgICAgIGVtYWlsOiAnJywKICAgICAgICBwYXNzd29yZDogJycKICAgICAgfSwKICAgICAgdG9rZW46ICcnLAogICAgICB1dWlkOiAnJywKICAgICAgYnRuTG9hZGluZzogZmFsc2UKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBjb25zb2xlLmxvZygibW91bnRlZCIpOwogICAgLy8gY29uc29sZS5sb2codGhpcy4kKHRoaXMuJHJlZnMuQnRuX0xvZ0luKSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzaWdpbkluKCkgewogICAgICBpZih0aGlzLnVzZXIuZW1haWwgPT0gJycgfHwgdGhpcy51c2VyLnBhc3N3b3JkID09ICcnKXsKICAgICAgICBhbGVydCgi6KuL5aGr5a+r5biz6Jmf5Y+K5a+G56K8Iik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9OwogICAgICAvLyBjb25zb2xlLmRpcigkKHRoaXMuJHJlZnMuQnRuX0xvZ0luKSk7CiAgICAgIHRoaXMuJGh0dHAKICAgICAgICAucG9zdChgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9L2F1dGgvbG9naW5gLCB0aGlzLnVzZXIpCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICBpZiggcmVzLmRhdGEuc3VjY2VzcyApewogICAgICAgICAgICAvLyDlsIfluLPlr4bnmoTovLjlhaXmoYbmuIXnqboKICAgICAgICAgICAgdGhpcy51c2VyLmVtYWlsID0gJyc7CiAgICAgICAgICAgIHRoaXMudXNlci5wYXNzd29yZCA9ICcnOwogICAgICAgICAgICAvLyBVdWlkLFRva2VuLOacn+mZkCDlr6vlhaUgY29va2llCiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGBoZXhIV1Rva2VuPSR7dGhpcy50b2tlbn07IGV4cGlyZXM9JHtuZXcgRGF0ZShyZXMuZGF0YS5leHBpcmVkICogMTAwMCl9YDsKICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gYGhleEhXVXVpZD0ke3RoaXMudXVpZH07IGV4cGlyZXM9JHtuZXcgRGF0ZShyZXMuZGF0YS5leHBpcmVkICogMTAwMCl9YDsKICAgICAgICAgICAgdGhpcy50b2tlbiA9IHJlcy5kYXRhLnRva2VuOwogICAgICAgICAgICB0aGlzLnV1aWQgPSByZXMuZGF0YS51dWlkOyAgICAgICAgICAgIAogICAgICAgICAgICBhbGVydChyZXMuZGF0YS5tZXNzYWdlKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIC8vIOWwh+W4s+WvhueahOi8uOWFpeahhua4heepugogICAgICAgICAgdGhpcy51c2VyLmVtYWlsID0gJyc7CiAgICAgICAgICB0aGlzLnVzZXIucGFzc3dvcmQgPSAnJzsKICAgICAgICAgIGFsZXJ0KCLoqbLnlKjmiLbkuI3lrZjlnKgiKTsKICAgICAgICB9KQogICAgICAgIAogICAgfSwKICAgIHNpZ25PdXQoKSB7CiAgICAgIHRoaXMudG9rZW4gPSAnJzsKICAgICAgdGhpcy51dWlkID0gJyc7CiAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICJoZXhIV1Rva2VuPTsgZXhwaXJlcz0iOwogICAgICBkb2N1bWVudC5jb29raWUgPSAiaGV4SFdVdWlkPTsgZXhwaXJlcz0iOwogICAgfSwKICB9Cn0K"},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/views/backend","sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <h1>後台介面</h1>\n    <!-- 開始：Bootstrap alert -->\n    <div class=\"container\">\n      <div class=\"alert alert-warning alert-dismissible fade show\" role=\"alert\">\n        <strong>Holy guacamole!</strong> You should check in on some of those fields below.\n        <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n    </div><!-- 結束：Bootstrap alert -->\n    <!-- 登入 -->\n    <div class=\"row d-flex justify-content-center align-items-center\" v-if=\"token == ''\">\n      <div class=\"col-12 col-sm-8 col-md-7 text-center\">\n        <div class=\"card p-5 shadow-sm\">\n          <h3 class=\"font-weight-bold mb-4\">請先登入</h3>\n          <div v-if=\"!token\" class=\" mb-4\">\n            <input type=\"email\" name=\"\" id=\"Email\" placeholder=\"Email address\" class=\"form-control\" v-model=\"user.email\"> <br/>\n            <input type=\"password\" name=\"\" id=\"password\" placeholder=\"Password\" class=\"form-control\" v-model=\"user.password\" @keyup.enter=\"siginIn\">\n          </div>          \n          <button type=\"button\" class=\"btn btn-primary btn-block btn-lg\" ref=\"Btn_LogIn\" @click=\"siginIn\">登入</button>\n        </div>        \n      </div>\n    </div>\n    <!-- 後臺選單 -->\n    <ul class=\"nav justify-content-center my-3\" v-else>\n      <li class=\"nav-item px-3 border-left border-right\">\n        <router-link to=\"/backend/products\">產品列表</router-link>\n      </li>\n      <li class=\"nav-item px-3 border-left border-right\">\n        <router-link to=\"/backend/coupons\">優惠券列表</router-link>\n      </li>\n      <li class=\"nav-item px-3 border-left border-right\">\n        <router-link to=\"/backend/orders\">訂單列表</router-link>\n      </li>\n      <li class=\"nav-item px-3 border-left border-right\">\n        <router-link to=\"/backend/pic-storage\">圖片儲存列表</router-link>\n      </li>\n      <li class=\"nav-item px-3 border-left border-right\">\n        <a href=\"#\" @click.prevent=\"signOut\">登出</a>\n      </li>\n    </ul>\n    <!-- 子頁面 -->\n    <router-view />\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      user: {\n        email: '',\n        password: ''\n      },\n      token: '',\n      uuid: '',\n      btnLoading: false\n    }\n  },\n  mounted() {\n    console.log(\"mounted\");\n    // console.log(this.$(this.$refs.Btn_LogIn));\n  },\n  methods: {\n    siginIn() {\n      if(this.user.email == '' || this.user.password == ''){\n        alert(\"請填寫帳號及密碼\");\n        return false;\n      };\n      // console.dir($(this.$refs.Btn_LogIn));\n      this.$http\n        .post(`${process.env.VUE_APP_APIPATH}/auth/login`, this.user)\n        .then(res => {\n          console.log(res);\n          if( res.data.success ){\n            // 將帳密的輸入框清空\n            this.user.email = '';\n            this.user.password = '';\n            // Uuid,Token,期限 寫入 cookie\n            document.cookie = `hexHWToken=${this.token}; expires=${new Date(res.data.expired * 1000)}`;\n            document.cookie = `hexHWUuid=${this.uuid}; expires=${new Date(res.data.expired * 1000)}`;\n            this.token = res.data.token;\n            this.uuid = res.data.uuid;            \n            alert(res.data.message);\n          }\n        })\n        .catch(err => {\n          console.log(err);\n          // 將帳密的輸入框清空\n          this.user.email = '';\n          this.user.password = '';\n          alert(\"該用戶不存在\");\n        })\n        \n    },\n    signOut() {\n      this.token = '';\n      this.uuid = '';\n      document.cookie = \"hexHWToken=; expires=\";\n      document.cookie = \"hexHWUuid=; expires=\";\n    },\n  }\n}\n</script>\n"]}]}