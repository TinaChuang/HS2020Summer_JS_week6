{"remainingRequest":"D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\babel-loader\\lib\\index.js!D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\JS_summer_vue_Cli\\js_week6\\src\\views\\backend\\Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\JS_summer_vue_Cli\\js_week6\\src\\views\\backend\\Dashboard.vue","mtime":1596187924955},{"path":"D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\JS_summer_vue_Cli\\js_week6\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICQgZnJvbSAialF1ZXJ5IjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiB7CiAgICAgICAgZW1haWw6ICcnLAogICAgICAgIHBhc3N3b3JkOiAnJwogICAgICB9LAogICAgICB0b2tlbjogJycsCiAgICAgIHV1aWQ6ICcnLAogICAgICBidG5Mb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNpZ2luSW46IGZ1bmN0aW9uIHNpZ2luSW4oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy51c2VyLmVtYWlsID09ICcnIHx8IHRoaXMudXNlci5wYXNzd29yZCA9PSAnJykgewogICAgICAgIGFsZXJ0KCLoq4vloavlr6vluLPomZ/lj4rlr4bnorwiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIDsKICAgICAgY29uc29sZS5kaXIoJCh0aGlzLiRyZWZzLkJ0bl9Mb2dJbikpOwogICAgICB0aGlzLiRodHRwLnBvc3QoIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSCwgIi9hdXRoL2xvZ2luIiksIHRoaXMudXNlcikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgaWYgKHJlcy5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgIC8vIOWwh+W4s+WvhueahOi8uOWFpeahhua4heepugogICAgICAgICAgX3RoaXMudXNlci5lbWFpbCA9ICcnOwogICAgICAgICAgX3RoaXMudXNlci5wYXNzd29yZCA9ICcnOyAvLyBVdWlkLFRva2VuLOacn+mZkCDlr6vlhaUgY29va2llCgogICAgICAgICAgZG9jdW1lbnQuY29va2llID0gImhleEhXVG9rZW49Ii5jb25jYXQoX3RoaXMudG9rZW4sICI7IGV4cGlyZXM9IikuY29uY2F0KG5ldyBEYXRlKHJlcy5kYXRhLmV4cGlyZWQgKiAxMDAwKSk7CiAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSAiaGV4SFdVdWlkPSIuY29uY2F0KF90aGlzLnV1aWQsICI7IGV4cGlyZXM9IikuY29uY2F0KG5ldyBEYXRlKHJlcy5kYXRhLmV4cGlyZWQgKiAxMDAwKSk7CiAgICAgICAgICBfdGhpcy50b2tlbiA9IHJlcy5kYXRhLnRva2VuOwogICAgICAgICAgX3RoaXMudXVpZCA9IHJlcy5kYXRhLnV1aWQ7CiAgICAgICAgICBhbGVydChyZXMuZGF0YS5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOyAvLyDlsIfluLPlr4bnmoTovLjlhaXmoYbmuIXnqboKCiAgICAgICAgX3RoaXMudXNlci5lbWFpbCA9ICcnOwogICAgICAgIF90aGlzLnVzZXIucGFzc3dvcmQgPSAnJzsKICAgICAgICBhbGVydCgi6Kmy55So5oi25LiN5a2Y5ZyoIik7CiAgICAgIH0pOwogICAgfSwKICAgIHNpZ25PdXQ6IGZ1bmN0aW9uIHNpZ25PdXQoKSB7CiAgICAgIHRoaXMudG9rZW4gPSAnJzsKICAgICAgdGhpcy51dWlkID0gJyc7CiAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICJoZXhIV1Rva2VuPTsgZXhwaXJlcz0iOwogICAgICBkb2N1bWVudC5jb29raWUgPSAiaGV4SFdVdWlkPTsgZXhwaXJlcz0iOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,OAAA,CAAA,MAAA,QAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA,OADA;AAKA,MAAA,KAAA,EAAA,EALA;AAMA,MAAA,IAAA,EAAA,EANA;AAOA,MAAA,UAAA,EAAA;AAPA,KAAA;AASA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AAAA;;AACA,UAAA,KAAA,IAAA,CAAA,KAAA,IAAA,EAAA,IAAA,KAAA,IAAA,CAAA,QAAA,IAAA,EAAA,EAAA;AACA,QAAA,KAAA,CAAA,UAAA,CAAA;AACA,eAAA,KAAA;AACA;;AAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,CAAA,CAAA,KAAA,KAAA,CAAA,SAAA,CAAA;AACA,WAAA,KAAA,CACA,IADA,WACA,OAAA,CAAA,GAAA,CAAA,eADA,kBACA,KAAA,IADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AACA;AACA,UAAA,KAAA,CAAA,IAAA,CAAA,KAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,IAAA,CAAA,QAAA,GAAA,EAAA,CAHA,CAIA;;AACA,UAAA,QAAA,CAAA,MAAA,wBAAA,KAAA,CAAA,KAAA,uBAAA,IAAA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA,GAAA,IAAA,CAAA;AACA,UAAA,QAAA,CAAA,MAAA,uBAAA,KAAA,CAAA,IAAA,uBAAA,IAAA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA,GAAA,IAAA,CAAA;AACA,UAAA,KAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,KAAA;AACA,UAAA,KAAA,CAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,UAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA,CAAA;AACA;AACA,OAfA,EAgBA,KAhBA,CAgBA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA,EADA,CAEA;;AACA,QAAA,KAAA,CAAA,IAAA,CAAA,KAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,CAAA,QAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA;AACA,OAtBA;AAwBA,KA/BA;AAgCA,IAAA,OAhCA,qBAgCA;AACA,WAAA,KAAA,GAAA,EAAA;AACA,WAAA,IAAA,GAAA,EAAA;AACA,MAAA,QAAA,CAAA,MAAA,GAAA,uBAAA;AACA,MAAA,QAAA,CAAA,MAAA,GAAA,sBAAA;AACA;AArCA;AAZA,CAAA","sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <h1>後台介面</h1>\n    <!-- 登入 -->\n    <div class=\"row d-flex justify-content-center align-items-center\" v-if=\"token == ''\">\n      <div class=\"col-12 col-sm-8 col-md-7 text-center\">\n        <div class=\"card p-5 shadow-sm\">\n          <h3 class=\"font-weight-bold mb-4\">請先登入</h3>\n          <div v-if=\"!token\" class=\" mb-4\">\n            <input type=\"email\" name=\"\" id=\"Email\" placeholder=\"Email address\" class=\"form-control\" v-model=\"user.email\"> <br/>\n            <input type=\"password\" name=\"\" id=\"password\" placeholder=\"Password\" class=\"form-control\" v-model=\"user.password\" @keyup.enter=\"siginIn\">\n          </div>          \n          <button type=\"button\" class=\"btn btn-primary btn-block btn-lg\" ref=\"Btn_LogIn\" @click=\"siginIn\">登入</button>\n        </div>        \n      </div>\n    </div>\n    <!-- 後臺選單 -->\n    <ul class=\"nav justify-content-center my-3\" v-else>\n      <li class=\"nav-item px-3 border-left border-right\">\n        <router-link to=\"/backend/products\">產品列表</router-link>\n      </li>\n      <li class=\"nav-item px-3 border-left border-right\">\n        <a href=\"#\" @click.prevent=\"signOut\">登出</a>\n      </li>\n    </ul>\n    <!-- 子頁面 -->\n    <router-view />\n  </div>\n</template>\n\n<script>\nimport $ from \"jQuery\";\nexport default {\n  data() {\n    return {\n      user: {\n        email: '',\n        password: ''\n      },\n      token: '',\n      uuid: '',\n      btnLoading: false\n    }\n  },\n  methods: {\n    siginIn() {\n      if(this.user.email == '' || this.user.password == ''){\n        alert(\"請填寫帳號及密碼\");\n        return false;\n      };\n      console.dir($(this.$refs.Btn_LogIn));\n      this.$http\n        .post(`${process.env.VUE_APP_APIPATH}/auth/login`, this.user)\n        .then(res => {\n          console.log(res);\n          if( res.data.success ){\n            // 將帳密的輸入框清空\n            this.user.email = '';\n            this.user.password = '';\n            // Uuid,Token,期限 寫入 cookie\n            document.cookie = `hexHWToken=${this.token}; expires=${new Date(res.data.expired * 1000)}`;\n            document.cookie = `hexHWUuid=${this.uuid}; expires=${new Date(res.data.expired * 1000)}`;\n            this.token = res.data.token;\n            this.uuid = res.data.uuid;            \n            alert(res.data.message);\n          }\n        })\n        .catch(err => {\n          console.log(err);\n          // 將帳密的輸入框清空\n          this.user.email = '';\n          this.user.password = '';\n          alert(\"該用戶不存在\");\n        })\n        \n    },\n    signOut() {\n      this.token = '';\n      this.uuid = '';\n      document.cookie = \"hexHWToken=; expires=\";\n      document.cookie = \"hexHWUuid=; expires=\";\n    },\n  }\n}\n</script>\n"],"sourceRoot":"src/views/backend"}]}